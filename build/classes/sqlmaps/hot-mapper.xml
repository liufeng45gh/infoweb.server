<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lucifer.model">

  <insert id="insertHot">
  	insert into hot (id,name,visible) values (#{id},#{name},0)
  </insert>
  
  <select id="hotList" resultType="com.lucifer.model.Hot">
  	<![CDATA[
  	select * from hot where visible<2
  	]]>
	<if test="name != null and name != '' ">
	and name like '${name}%'
	</if> 
	order by id desc
	<if test="offset != null and perPageCount != null">
	limit #{offset},#{perPageCount}
	</if> 
   
  </select>
  
  <select id="hotListCount" resultType="java.lang.Integer">
  	<![CDATA[
  	select count(*) from hot where visible<2
  	]]>
	<if test="name != null and name != '' ">
	and name like '${name}%'
	</if> 
  </select>
  
  <select id="getHot" resultType="com.lucifer.model.Hot">
  	<![CDATA[
  		select * from hot where visible<2 and id = #{id}
  	]]>
  </select>
  
  <update id="updateHot">
 	update hot set name=#{name} where id =#{id}
  </update>
  
  <delete id="deleteHot">
  	delete from hot where id = #{id}
  </delete>
  
  <select id="getHotRandom" resultType="com.lucifer.model.Hot">
  	<![CDATA[
  		SELECT id,name FROM reading_cloud.hot order by rand() limit 1
  	]]>
  </select>
  
  
</mapper>